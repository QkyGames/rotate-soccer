<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rotate Soccer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

<meta name="generator" content="Construct 3">

	<link rel="manifest" href="appmanifest.json">
	<link rel="apple-touch-icon" sizes="128x128" href="icons/icon-128.png">
	<link rel="apple-touch-icon" sizes="256x256" href="icons/icon-256.png">
	<link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512.png">
	<link rel="icon" type="image/png" href="icons/icon-512.png">

<link rel="stylesheet" href="style.css">

</head>
<body>
<div id="fb-root"></div>
	
	<script async
      data-ad-client= 'ca-pub-9737420423828962'
      data-ad-frequency-hint="30s"
	  data-ad-channel = "rotate-soccer" 
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
    </script>
     <script>

     	if ('serviceWorker' in navigator) 
     	{
     			navigator.serviceWorker.getRegistrations().then(function(registrations) {

    for(let registration of registrations) {

            registration.unregister()

    }}).catch(function(err) {

        console.log('Service Worker registration failed: ', err);

    });
     	}

      window.adsbygoogle = window.adsbygoogle || [];
      const adBreak = adConfig = function(o) {adsbygoogle.push(o);}

      function ShowPreloaderAd()
      {
        adBreak({
          type: 'preroll',  // ad shows at start of next level
          name: 'preload-game',
          adBreakDone: () => { StartGame() },
        });
      }

      function StartGame()
      {
        var s = document.createElement("script");
        s.type = "module";
        s.src = "scripts/main.js";
        document.getElementsByTagName('head')[0].appendChild(s);
      }

      ShowPreloaderAd();

    </script>

  <script type="text/javascript">

    function requestAd() 
    {
      window.adcomplete = 0;     

      adBreak({
        type: 'next',  // ad shows at start of next level
        name: 'restart-game',
        beforeAd: () => { Pause() },  // You may also want to mute the game's sound.
        afterAd: () => { UnPause() },    // resume the game flow.
        adBreakDone: () => { UnPause() },
      });

      window.adready = 0;
    }

    function requestAdStart() 
    {
      window.adcomplete = 0;     

      adBreak({
        type: 'start',  // ad shows at start of next level
        name: 'game_started',
        beforeAd: () => { Pause() },  // You may also want to mute the game's sound.
        afterAd: () => { UnPause() },    // resume the game flow.
        adBreakDone: () => { UnPause() },
      });

      window.adready = 0;
    }

    function requestRewardAd() 
    {
      window.adfailed = 0;
      window.rewardcomplete = 0;

      var adloaded = false;

      adBreak({
        type: 'reward', // The type of this placement
        name: 'reward', // A descriptive name for this placement
        beforeAd: () => { console.log("***** beforeAd *****"); }, // Prepare for the ad. Mute and pause the game flow
        afterAd: () => { console.log("***** afterAd *****"); }, // Resume the game and re-enable sound
        beforeReward: (showAdFn) => { 
          console.log("***** beforeReward *****"); 
          adloaded = true;
          // Show reward prompt
          /*var r = confirm("Watch this video and get 100 coins?");
          if (r == true) {
              showAdFn();
          } else {
              this.reward_msg.innerHTML = 'Ad is ignored.';
          }*/
          showAdFn();
        }, // Show reward prompt (call showAdFn() if clicked)
        adDismissed: () => { 
          console.log("***** adDismissed *****"); 
          window.rewardcomplete = 0;
          window.adfailed = 1;
        }, // Player dismissed the ad before it finished.
        adViewed: () => { 
          console.log("***** adViewed *****"); 
          window.rewardcomplete = 1;
        }, // Player watched the adâ€“give them the reward.
      });

      if (adloaded == false) {
          window.adfailed = 1;
      }
    }

    //Poner video complete en 0 una vez que obtube el premio
    function ResetVideo()
    {
      window.rewardcomplete = 0;
    }

     //Poner video failed en 0 una vez que cerro el video y obtuve la devolucion
    function ResetVideoFailed()
    {
      window.adfailed = 0;
    }

    //Leer si la carga del video fallo para mostrar el evento failed
    function VideoAdFailed()
    {
      return window.adfailed;
    }

    //Leer si el video termino
    function GetVideoComplete()
    {
      return window.rewardcomplete;
    }

    //Pausar juego
    function Pause()
    {
      window.adcomplete = 0;
    }

    //Continuar juego
    function UnPause()
    {
      window.adcomplete = 1;
    }

    //Leer si cerre o fallo el interstitial
    function GetAdState()
    {
      return window.adcomplete;
    }

    //Poner el interstitial en 0 para volverlo a mostrar
    function ResetAdComplete()
    {
      window.adcomplete = 0;
    }

    </script>

	<script src="box2d.wasm.js"></script>
	<noscript>
		<div id="notSupportedWrap">
			<h2 id="notSupportedTitle">This content requires JavaScript</h2>
			<p class="notSupportedMessage">JavaScript appears to be disabled. Please enable it to view this content.</p>
		</div>
	</noscript>
	<script src="scripts/supportcheck.js"></script>
	<script src="scripts/offlineclient.js" type="module"></script>
	<script src="scripts/register-sw.js" type="module"></script>
</body>
</html>